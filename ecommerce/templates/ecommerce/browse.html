{% extends 'ecommerce/base.html' %}
{% load staticfiles %}
{% load basket_tags %}
{% load promotion_tags %}
{% load category_tags %}
{% load product_tags %}
{% load rootcategories_tags %}
{% load i18n %}

{% block content %}
  <div class="container">
    <div class="row">
      <ul class="nav navbar-nav">
      {% root_categories as roots %}
        {% for root in roots %}
        <li class="dropdown" id="menuitem{{root.id}}">
          <a href="#" role="button" aria-haspopup="true" aria-expanded="false">{{ root.name }}<span class="caret"></span></a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% for root in roots %}
    <div class="row hidden jdi-dropdown-content" id="dropdownmenuitem{{root.id}}">
      {% for category in root.get_children %}
      <div class="col-md-3">
        <h3>{{ category.name }}</h3><br>
        {% for subcategory in category.get_children %}
        <a href={{ subcategory.get_absolute_url }}>{{ subcategory.name }}</a><br>
        {% endfor %}
        <br>
      </div>
      {% endfor %}
    </div>
    {% endfor %}
  </div>
  <div class="container">
    <ul class="breadcrumb">
        <li><a href="{{ homepage_url }}">Home</a></li>
        <li class="active">{{ summary }}</li>
    </ul>
  </div>
    <div class="container">
  <form method="get" class="form-horizontal">
        {# Render other search params in a hidden block #}
        <div style="display:none">
            {% for value in selected_facets %}
                <input name="selected_facets" value="{{ value }}" />
            {% endfor %}
            {{ form.q }}
        </div>

        {% if paginator.count %}
            {% if paginator.num_pages > 1 %}
                {% blocktrans with start=page_obj.start_index end=page_obj.end_index count num_results=paginator.count %}
                    <strong>{{ num_results }}</strong> result - showing <strong>{{ start }}</strong> to <strong>{{ end }}</strong>.
                {% plural %}
                    <strong>{{ num_results }}</strong> results - showing <strong>{{ start }}</strong> to <strong>{{ end }}</strong>.
                {% endblocktrans %}
            {% else %}
                {% blocktrans count num_results=paginator.count %}
                    <strong>{{ num_results }}</strong> result.
                {% plural %}
                    <strong>{{ num_results }}</strong> results.
                {% endblocktrans %}
            {% endif %}
            {% if form %}
                <div class="pull-right">
                    {% include "partials/form_field.html" with field=form.sort_by %}
                </div>
            {% endif %}
        {% else %}
            <p>
                {% trans "<strong>0</strong> results." %}
            </p>
        {% endif %}
    </form>

    {% if products %}
        <div class="row">
            {% for product in products %}
                <div class="col-xs-6 col-sm-4 col-md-3 col-lg-3">
                    {% render_product product %}
                </div>
            {% endfor %}
        </div>
        <div class="row">
            {% include "partials/pagination.html" %}
        </div>
    {% else %}
        <div class="row">
        <p class="nonefound">{% trans "No products found." %}</p>
        </div>
    {% endif %}
    </div>
{% endblock %}
